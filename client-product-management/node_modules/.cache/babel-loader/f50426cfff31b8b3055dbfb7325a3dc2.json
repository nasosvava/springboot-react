{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nasos\\\\Desktop\\\\springboot-react\\\\client-product-management\\\\src\\\\App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { Router, Route, Link, Switch, Redirect } from 'react-router-dom';\nimport { createBrowserHistory } from 'history';\nimport { HomePage } from './components/home/HomePage';\nimport { LoginPage } from './components/login/LoginPage';\nimport { RegisterPage } from './components/register/RegisterPage';\nimport { ProfilePage } from './components/profile/ProfilePage';\nimport { DetailPage } from './components/detail/DetailPage';\nimport { AdminPage } from './components/admin/AdminPage';\nimport { NotFound } from './components/errors/NotFound';\nimport { Unauthorized } from './components/errors/Unauthorized';\nimport AuthGuard from './guards/AuthGuard';\nimport { Role } from './models/role';\nimport UserService from './services/user.service';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser, faUserPlus, faSignInAlt, faHome, faSignOutAlt, faUserShield } from '@fortawesome/free-solid-svg-icons';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: createBrowserHistory(),\n      currentUser: null,\n      isAdmin: false,\n      currentLocation: window.location.pathname\n    };\n  }\n\n  componentWillMount() {\n    this.unlisten = this.state.history.listen((location, action) => {\n      this.setState({\n        currentLocation: location.pathname\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data,\n        isAdmin: data && data.role === Role.ADMIN\n      });\n    });\n  }\n\n  logout() {\n    UserService.logOut().then(data => {\n      this.state.history.push('/home');\n    }, error => {\n      this.setState({\n        errorMessage: \"Unexpected error occurred\"\n      });\n    });\n  }\n\n  render() {\n    const {\n      currentUser,\n      isAdmin,\n      history,\n      currentLocation\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Router, {\n      history: history,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, this.state.currentUser && /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"navbar navbar-expand navbar-dark bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"navbar-brand\",\n      href: \"https://reactjs.org\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }), \"React\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navbar-nav mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/home\",\n      className: currentLocation == '/home' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faHome,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 123\n      }\n    }), \" Home\"), this.state.isAdmin && /*#__PURE__*/React.createElement(Link, {\n      to: \"/admin\",\n      className: currentLocation == '/admin' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 40\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faUserShield,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 148\n      }\n    }), \" Admin\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navbar-nav ml-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/profile\",\n      className: currentLocation == '/profile' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 129\n      }\n    }), \" \", currentUser.name), /*#__PURE__*/React.createElement(\"a\", {\n      onClick: () => this.logout(),\n      className: \"nav-item nav-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faSignOutAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 78\n      }\n    }), \" LogOut\"))), !this.state.currentUser && /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"navbar navbar-expand navbar-dark bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"navbar-brand\",\n      href: \"https://reactjs.org\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }), \"React\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navbar-nav mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/home\",\n      className: currentLocation == '/home' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faHome,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 123\n      }\n    }), \" Home\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navbar-nav ml-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      className: currentLocation == '/register' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faUserPlus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 131\n      }\n    }), \" Register\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      className: currentLocation == '/login' ? 'nav-item nav-link active' : 'nav-item nav-link',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faSignInAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 125\n      }\n    }), \" Login\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: HomePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/home\",\n      component: HomePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      component: LoginPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/register\",\n      component: RegisterPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(AuthGuard, {\n      path: \"/profile\",\n      roles: [Role.ADMIN, Role.USER],\n      component: ProfilePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/detail/:id\",\n      component: DetailPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(AuthGuard, {\n      path: \"/admin\",\n      roles: [Role.ADMIN],\n      component: AdminPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/404\",\n      component: NotFound,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/401\",\n      component: Unauthorized,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      from: \"*\",\n      to: \"/404\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Nasos/Desktop/springboot-react/client-product-management/src/App.js"],"names":["React","Router","Route","Link","Switch","Redirect","createBrowserHistory","HomePage","LoginPage","RegisterPage","ProfilePage","DetailPage","AdminPage","NotFound","Unauthorized","AuthGuard","Role","UserService","FontAwesomeIcon","faUser","faUserPlus","faSignInAlt","faHome","faSignOutAlt","faUserShield","App","Component","constructor","props","state","history","currentUser","isAdmin","currentLocation","window","location","pathname","componentWillMount","unlisten","listen","action","setState","componentWillUnmount","componentDidMount","subscribe","data","role","ADMIN","logout","logOut","then","push","error","errorMessage","render","logo","name","USER"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport {Router, Route, Link, Switch, Redirect} from 'react-router-dom';\nimport {createBrowserHistory} from 'history';\n\nimport {HomePage} from './components/home/HomePage';\nimport {LoginPage} from './components/login/LoginPage';\nimport {RegisterPage} from './components/register/RegisterPage';\nimport {ProfilePage} from './components/profile/ProfilePage';\nimport {DetailPage} from './components/detail/DetailPage';\nimport {AdminPage} from './components/admin/AdminPage';\nimport {NotFound} from './components/errors/NotFound';\nimport {Unauthorized} from './components/errors/Unauthorized';\n\nimport AuthGuard from './guards/AuthGuard';\nimport {Role} from './models/role';\n\nimport UserService from './services/user.service';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faUser, faUserPlus, faSignInAlt, faHome, faSignOutAlt, faUserShield} from '@fortawesome/free-solid-svg-icons';\n\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n\n    this.state = {\n      history: createBrowserHistory(),\n      currentUser: null,\n      isAdmin: false,\n      currentLocation: window.location.pathname\n    };\n  }\n\n  componentWillMount() {\n    this.unlisten = this.state.history.listen((location, action) => {\n      this.setState({currentLocation: location.pathname})\n    });\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  componentDidMount() {\n    UserService.currentUser.subscribe(data => {\n      this.setState({\n        currentUser: data,\n        isAdmin: data && data.role === Role.ADMIN\n      })\n    });\n  }\n\n  logout() {\n    UserService.logOut()\n    .then(\n      data => {\n        this.state.history.push('/home');\n      },\n      error => {\n        this.setState({\n          errorMessage: \"Unexpected error occurred\"\n        });\n      }\n    );\n  }\n\n  render(){\n    const {currentUser, isAdmin, history, currentLocation} = this.state;\n    return (\n        <Router history={history}>\n          <div>\n          {this.state.currentUser &&\n            <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\n              <a className=\"navbar-brand\" href=\"https://reactjs.org\">\n                <img src={logo} className=\"App-logo\" alt=\"logo\"/>\n                React\n              </a>\n              <div className=\"navbar-nav mr-auto\">\n                <Link to=\"/home\" className={currentLocation == '/home' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faHome}/> Home</Link>\n                {this.state.isAdmin && <Link to=\"/admin\" className={currentLocation == '/admin' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faUserShield}/> Admin</Link>}\n              </div>\n\n              <div className=\"navbar-nav ml-auto\">\n                <Link to=\"/profile\" className={currentLocation == '/profile' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faUser}/> {currentUser.name}</Link>\n                <a onClick={()=>this.logout()} className=\"nav-item nav-link\"><FontAwesomeIcon icon={faSignOutAlt}/> LogOut</a>\n              </div>\n            </nav>\n          }\n\n          {!this.state.currentUser &&\n            <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\n              <a className=\"navbar-brand\" href=\"https://reactjs.org\">\n                <img src={logo} className=\"App-logo\" alt=\"logo\"/>\n                React\n              </a>\n              <div className=\"navbar-nav mr-auto\">\n                <Link to=\"/home\" className={currentLocation == '/home' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faHome}/> Home</Link>\n              </div>\n\n              <div className=\"navbar-nav ml-auto\">\n                <Link to=\"/register\" className={currentLocation == '/register' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faUserPlus}/> Register</Link>\n                <Link to=\"/login\" className={currentLocation == '/login' ? 'nav-item nav-link active': 'nav-item nav-link'}><FontAwesomeIcon icon={faSignInAlt}/> Login</Link>\n              </div>\n            </nav>\n          }\n          <div className=\"container\">\n            <Switch>\n              <Route exact path=\"/\" component={HomePage}/>\n              <Route exact path=\"/home\" component={HomePage}/>\n              <Route exact path=\"/login\" component={LoginPage}/>\n              <Route exact path=\"/register\" component={RegisterPage}/>\n              <AuthGuard path=\"/profile\" roles={[Role.ADMIN, Role.USER]} component={ProfilePage}/>\n              <Route exact path=\"/detail/:id\" component={DetailPage}/>\n              <AuthGuard path=\"/admin\" roles={[Role.ADMIN]} component={AdminPage}/>\n              <Route exact path=\"/404\" component={NotFound}/>\n              <Route exact path=\"/401\" component={Unauthorized}/>\n              <Redirect from='*' to='/404' />\n            </Switch>\n          </div>\n          </div>\n        </Router>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}