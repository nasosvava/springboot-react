{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nasos\\\\Desktop\\\\springboot-react-master\\\\client-product-management\\\\src\\\\components\\\\modals\\\\UserModal.jsx\";\nimport React from 'react';\nimport AdminService from '../../services/admin.service';\nimport UserService from '../../services/user.service';\nimport $ from 'jquery';\n\nclass UserModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this.props.user,\n      submitted: false,\n      loading: false,\n      error: ''\n    };\n  }\n\n  componentDidMount() {\n    const {\n      handleModalCloseClick\n    } = this.props;\n    $(this.modal).modal('show');\n    $(this.modal).on('hidden.bs.modal', handleModalCloseClick);\n  }\n\n  handleCloseClick() {\n    const {\n      handleModalCloseClick\n    } = this.props;\n    $(this.modal).modal('hide');\n    handleModalCloseClick();\n  }\n\n  handleChange(e) {\n    var {\n      name,\n      value\n    } = e.target;\n    var user = this.state.user;\n    user[name] = value;\n    this.setState({\n      user: user\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      submitted: true\n    });\n    const {\n      user\n    } = this.state; // stop here if form is invalid\n\n    if (!(user.username && user.password)) {\n      return;\n    }\n\n    this.setState({\n      loading: true\n    });\n\n    if (user.id !== -1) {\n      this.updateUser(user);\n    } else {\n      this.createUser(user);\n    }\n  }\n\n  createUser(user) {\n    UserService.register(user).then(data => {\n      console.log(data.data);\n      this.props.onChildUpdate(data.data, true, false);\n      this.handleCloseClick();\n    }, error => {\n      this.props.onChildUpdate(null, false, false);\n      this.setState({\n        error: \"Unexpected error occurred.\",\n        loading: false\n      });\n    });\n  }\n\n  updateUser(user) {\n    AdminService.updateUser(user).then(data => {\n      console.log(data.data);\n      this.props.onChildUpdate(data.data, true, true);\n      this.handleCloseClick();\n    }, error => {\n      this.props.onChildUpdate(null, false, false);\n      this.setState({\n        error: \"Unexpected error occurred.\",\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      user,\n      submitted,\n      loading,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, user && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"userModal\",\n      tabIndex: \"-1\",\n      ref: modal => this.modal = modal,\n      role: \"dialog\",\n      \"aria-labelledby\": \"userModalLabel\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-dialog\",\n      role: \"document\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      name: \"form-user-update\",\n      onSubmit: e => this.handleSubmit(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"modal-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, \"User Details\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 97\n      }\n    }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }\n    }, error && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, \"Error! \"), \" \", error, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"alert\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 23\n      }\n    }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'form-group' + (submitted && !user.name ? ' has-error' : ''),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, \"Full Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"name\",\n      value: user.name,\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }), submitted && !user.name && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }, \"Name is required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'form-group' + (submitted && !user.username ? ' has-error' : ''),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"username\",\n      value: user.username,\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }), submitted && !user.username && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 25\n      }\n    }, \"Username is required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'form-group' + (submitted && !user.password ? ' has-error' : ''),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      readOnly: user.id !== -1,\n      type: \"password\",\n      className: \"form-control\",\n      name: \"password\",\n      value: user.password,\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }), submitted && !user.password && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }, \"Password is required\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'form-group' + (submitted && !user.role ? ' has-error' : ''),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"role\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 19\n      }\n    }, \"User Role\"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      name: \"role\",\n      id: \"role\",\n      required: true,\n      value: user.role,\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, \"Choose\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ADMIN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }\n    }, \"ADMIN\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"USER\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, \"USER\")), submitted && !user.role && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 23\n      }\n    }, \"Role is required\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      \"data-dismiss\": \"modal\",\n      onClick: () => this.handleCloseClick(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, \"Save Changes\")))))));\n  }\n\n}\n\nexport { UserModal };","map":{"version":3,"sources":["C:/Users/Nasos/Desktop/springboot-react-master/client-product-management/src/components/modals/UserModal.jsx"],"names":["React","AdminService","UserService","$","UserModal","Component","constructor","props","state","user","submitted","loading","error","componentDidMount","handleModalCloseClick","modal","on","handleCloseClick","handleChange","e","name","value","target","setState","handleSubmit","preventDefault","username","password","id","updateUser","createUser","register","then","data","console","log","onChildUpdate","render","role"],"mappings":"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","sourcesContent":["import React from 'react';\nimport AdminService from '../../services/admin.service';\nimport UserService from '../../services/user.service';\nimport $ from 'jquery';\n\nclass UserModal extends React.Component {\n\n  constructor(props) {\n      super(props);\n\n      this.state = {\n          user: this.props.user,\n          submitted: false,\n          loading: false,\n          error: ''\n      };\n  }\n\n  componentDidMount() {\n    const { handleModalCloseClick } = this.props;\n      $(this.modal).modal('show');\n      $(this.modal).on('hidden.bs.modal', handleModalCloseClick);\n  }\n\n  handleCloseClick() {\n    const { handleModalCloseClick } = this.props;\n    $(this.modal).modal('hide');\n    handleModalCloseClick();\n  }\n\n  handleChange(e) {\n      var { name, value } = e.target;\n      var user = this.state.user;\n      user[name] = value;\n      this.setState({ user: user });\n  }\n\n  handleSubmit(e) {\n      e.preventDefault();\n\n      this.setState({ submitted: true });\n      const { user } = this.state;\n\n      // stop here if form is invalid\n      if (!(user.username && user.password)) {\n          return;\n      }\n\n      this.setState({ loading: true });\n      if(user.id !== -1){\n        this.updateUser(user);\n      }else{\n        this.createUser(user);\n      }\n  }\n\n  createUser(user){\n    UserService.register(user)\n        .then(\n            data => {\n                console.log(data.data);\n                this.props.onChildUpdate(data.data, true, false);\n                this.handleCloseClick();\n            },\n            error => {\n              this.props.onChildUpdate(null, false, false);\n              this.setState({ error: \"Unexpected error occurred.\", loading: false });\n            }\n        );\n  }\n\n  updateUser(user){\n    AdminService.updateUser(user)\n        .then(\n            data => {\n                console.log(data.data);\n                this.props.onChildUpdate(data.data, true, true);\n                this.handleCloseClick();\n            },\n            error => {\n              this.props.onChildUpdate(null, false, false);\n              this.setState({ error: \"Unexpected error occurred.\", loading: false });\n            }\n        );\n  }\n\n  render(){\n    const { user, submitted, loading, error } = this.state;\n    return (\n      <div>\n      {user &&\n      <div className=\"modal fade\" id=\"userModal\" tabIndex=\"-1\" ref={modal=> this.modal = modal} role=\"dialog\" aria-labelledby=\"userModalLabel\" aria-hidden=\"true\">\n        <div className=\"modal-dialog\" role=\"document\">\n          <div className=\"modal-content\">\n            <form name=\"form-user-update\"  onSubmit={(e)=>this.handleSubmit(e)}>\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\">User Details</h5>\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n              </div>\n              <div className=\"modal-body\">\n                {error &&\n                  <div className=\"alert alert-danger\" role=\"alert\">\n                    <strong>Error! </strong> {error}\n                    <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                      <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                  </div>\n                }\n\n                <div className={'form-group' + (submitted && !user.name ? ' has-error' : '')}>\n                    <label htmlFor=\"name\">Full Name</label>\n                    <input type=\"text\" className=\"form-control\" name=\"name\" value={user.name} onChange={(e)=>this.handleChange(e)} />\n                    {submitted && !user.name &&\n                        <div className=\"alert alert-danger\" role=\"alert\">Name is required</div>\n                    }\n                </div>\n                <div className={'form-group' + (submitted && !user.username ? ' has-error' : '')}>\n                    <label htmlFor=\"username\">Username</label>\n                    <input type=\"text\" className=\"form-control\" name=\"username\" value={user.username} onChange={(e)=>this.handleChange(e)} />\n                    {submitted && !user.username &&\n                        <div className=\"alert alert-danger\" role=\"alert\">Username is required</div>\n                    }\n                </div>\n\n                <div className={'form-group' + (submitted && !user.password ? ' has-error' : '')}>\n                    <label htmlFor=\"password\">Password</label>\n                    <input readOnly={user.id!==-1} type=\"password\" className=\"form-control\" name=\"password\" value={user.password} onChange={(e)=>this.handleChange(e)} />\n                    {submitted && !user.password &&\n                        <div className=\"alert alert-danger\" role=\"alert\">Password is required</div>\n                    }\n                </div>\n\n                <div className={'form-group' + (submitted && !user.role ? ' has-error' : '')}>\n                  <label htmlFor=\"role\">User Role</label>\n                  <select className=\"form-control\" name=\"role\" id=\"role\" required value={user.role} onChange={(e)=>this.handleChange(e)}>\n                    <option value=\"\">Choose</option>\n                    <option value=\"ADMIN\">ADMIN</option>\n                    <option value=\"USER\">USER</option>\n                  </select>\n                  {submitted && !user.role &&\n                      <div className=\"alert alert-danger\" role=\"alert\">Role is required</div>\n                  }\n                </div>\n              </div>\n              <div className=\"modal-footer\">\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={()=>this.handleCloseClick()}>Close</button>\n                <button type=\"submit\" className=\"btn btn-primary\">Save Changes</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    }\n    </div>\n    );\n  }\n\n}\n\nexport { UserModal };\n"]},"metadata":{},"sourceType":"module"}